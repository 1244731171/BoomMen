<!DOCTYPE html>
<!-- saved from url=(0162)https://ui.ptlogin2.qq.com/cgi-bin/login?pt_hide_ad=1&style=9&appid=549000929&pt_no_auth=1&pt_wxtest=1&daid=5&s_url=https%3A%2F%2Fh5.qzone.qq.com%2Fmqzone%2Findex -->
<html lang="zh-cn">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta id="viewport" name="viewport"
        content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>æ‰‹æœºç»Ÿä¸€ç™»å½•</title>
    <style type="text/css">
        @charset "utf-8";

        body,
        html {
            height: 100%
        }

        #go,
        #onekey,
        #vcode #submit,
        .copyright,
        .header,
        .nick,
        .q_login,
        .ui_topbar {
            text-align: center
        }

        .del_touch,
        .inputstyle {
            -webkit-tap-highlight-color: rgba(255, 255, 255, 0)
        }

        body {
            font-size: 16px;
            background: #eee
        }

        * {
            padding: 0;
            margin: 0;
            list-style: none;
            text-decoration: none
        }

        input::-webkit-input-placeholder,
        textarea::-webkit-input-placeholder {
            color: #aaa
        }

        input::-ms-input-placeholder,
        textarea::-ms-input-placeholder {
            color: #aaa
        }

        input:focus {
            outline: 0
        }

        .content {
            margin: 0 auto;
            width: 320px;
            height: 500px;
            position: relative
        }

        #error_tips {
            position: absolute;
            top: 0;
            z-index: 100;
            display: none;
            opacity: .95;
            width: 100%
        }

        #error_tips #error_tips_content {
            position: relative;
            padding: 16px 0 24px 24px;
            border-radius: 5px;
            background-color: #525C5F;
            height: 28px
        }

        #error_tips #error_tips_content #error_icon {
            position: absolute;
            top: 18px;
            display: inline-block;
            width: 24px;
            height: 24px;
            background: url("/style/8/images/info.png") no-repeat
        }

        #error_tips #error_tips_content #error_message {
            display: inline-block;
            line-height: 28px;
            font-size: 14px;
            color: #fff;
            padding: 0 0 0 28px
        }

        #error_message a,
        #error_message a:visited {
            color: #F15A22
        }

        @media (-webkit-min-device-pixel-ratio:2),
        (min-resolution:192dpi),
        (min-resolution:2dppx) {
            #error_tips #error_tips_content #error_icon {
                background: url("/style/8/images/info@2x.png") no-repeat;
                background-size: 24px 24px
            }
        }

        .login {
            margin: 0 auto;
            padding-top: 30px
        }

        .q_login {
            margin: 0 auto 40px;
            width: 290px;
            overflow: hidden
        }

        .inputstyle {
            width: 273px;
            height: 44px;
            color: #000;
            border: none;
            background: 0 0;
            padding-left: 15px;
            font-size: 16px;
            -webkit-appearance: none
        }

        .logo {
            height: 100px;
            width: 244px;
            margin: 0 auto 20px;
            background-size: 244px 100px
        }

        #switch,
        #vcode,
        #web_login {
            margin: 0 auto
        }

        .header {
            display: inline-block;
            height: 97px;
            width: 96px;
            position: relative
        }

        #q_login_logo,
        #q_login_tips,
        #remember,
        #remember+.checkbox,
        #vcode #input_tips,
        #vcode #vcode_img,
        #vcode #vcode_input,
        .del_touch,
        .del_touch_icon,
        .del_u,
        .header .img_out,
        .header img,
        .nick,
        .txt_default {
            position: absolute
        }

        .header img {
            width: 60px;
            height: 60px;
            top: 10px;
            left: 16px
        }

        .header .img_out {
            width: 60px;
            height: 60px;
            top: 9px;
            left: 15px;
            border: 1px solid #c6dbe8;
            border-radius: 4px;
            -webkit-box-shadow: 1px 1px 13px #6E6E6E
        }

        .nick {
            display: inline-block;
            top: 80px;
            left: 0;
            height: 20px;
            line-height: 18px;
            vertical-align: middle
        }

        .del_touch_icon {
            display: none;
            width: 30px;
            height: 30px;
            left: 60px;
            top: 0;
            z-index: 1
        }

        .del_icon {
            display: block;
            width: 24px;
            height: 22px;
            background: url("/android_logo_v1.png") -68px 0 no-repeat;
            border-radius: 11px
        }

        #web_login {
            width: 290px
        }

        #g_list {
            background: #fff;
            height: 89px;
            border-radius: 4px
        }

        #g_p,
        #g_u {
            position: relative
        }

        #g_u {
            border-bottom: 1px solid #eaeaea
        }

        .txt_default {
            top: 12px;
            left: 10px;
            color: #b3b3b3
        }

        .del_touch {
            right: 0;
            display: none;
            height: 44px;
            width: 48px;
            z-index: 1
        }

        .del_u {
            display: block;
            left: 15px;
            top: 13px;
            height: 18px;
            width: 18px;
            border-radius: 9px;
            background: url("/android_logo_v1.png") -117px -2px no-repeat
        }

        #auto_login {
            height: 24px;
            margin: 15px 0;
            color: #246183;
            position: relative
        }

        #auto_login .wording {
            position: absolute;
            left: 40px;
            line-height: 24px;
            height: 24px;
            font-size: 14px
        }

        #remember {
            left: 14px;
            top: 5px;
            cursor: pointer;
            z-index: 1;
            opacity: .01
        }

        #remember:checked+.checkbox {
            background: url("/style/8/images/checked.png") 1px 1px #146FDF;
            border-color: #146FDF
        }

        #remember+.checkbox {
            display: inline-block;
            width: 21px;
            height: 21px;
            left: 9px;
            top: 1px;
            border: 1px solid #9ABBE3;
            background: 0 0;
            border-radius: 11px
        }

        #go,
        #onekey {
            width: 290px;
            height: 44px;
            line-height: 44px;
            background: #146fdf;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
            margin-top: 15px;
            display: block
        }

        #go.weak,
        #onekey.weak,
        #switch #swicth_login {
            height: 42px;
            border: 1px solid #9abbe3;
            color: #146fdf
        }

        #onekey {
            background: #146fdf;
            display: none
        }

        #go.weak,
        #onekey.weak {
            background-color: #e7e7e7
        }

        #switch {
            width: 290px
        }

        #switch #swicth_login {
            width: 288px;
            line-height: 44px;
            border-radius: 5px;
            background: #e7e7e7;
            margin-top: 10px;
            text-align: center;
            font-size: 16px
        }

        #switch #zc_feedback {
            width: 290px;
            position: relative;
            margin-top: 15px;
            overflow: hidden
        }

        #switch #forgetpwd,
        #switch #zc {
            color: #246183;
            line-height: 14px;
            font-size: 14px;
            padding: 15px 10px
        }

        #switch #zc {
            float: right;
            margin-right: -10px
        }

        #switch #forgetpwd {
            float: left;
            margin-left: -10px
        }

        .tansparent {
            background: 0 0
        }

        #q_login_title {
            height: 32px;
            line-height: 22px;
            margin-bottom: 20px;
            position: relative
        }

        #q_login_logo {
            background: url("/android_logo_v1.png") -44px 0 no-repeat;
            width: 22px;
            height: 22px;
            left: 0
        }

        #q_login_tips {
            left: 30px;
            top: 0;
            color: #246183
        }

        #vcode {
            padding-top: 40px;
            display: none
        }

        #vcode #vcode_tips {
            display: block;
            width: 290px;
            height: 20px;
            line-height: 20px;
            margin: 0 auto 15px;
            color: #77838D
        }

        #vcode #vcode_area {
            position: relative;
            margin: 0 auto;
            width: 290px;
            height: 70px;
            border-radius: 5px;
            border: 1px solid #b8b8b8;
            background: #fff
        }

        #vcode #vcode_img {
            left: 3px;
            width: 140px;
            height: 70px
        }

        #vcode #vcode_input {
            top: -1px;
            left: 145px;
            width: 145px;
            height: 70px;
            border: 1px solid #9d9d9d;
            background: 0 0;
            -webkit-appearance: none;
            border-top-right-radius: 5px;
            border-bottom-right-radius: 5px;
            line-height: 28px;
            font-size: 28px;
            -webkit-box-shadow: inset 0 0 10px #ccc
        }

        #vcode #input_tips {
            top: 5px;
            left: 150px;
            display: block;
            width: 135px;
            height: 50px;
            color: #B3B3B3;
            z-index: 1;
            padding-top: 8px
        }

        #vcode #submit {
            width: 288px;
            height: 22px;
            padding: 10px 0;
            background: #7ec82c;
            border: none;
            border-radius: 5px;
            color: #fff;
            font-size: 22px;
            margin: 35px auto 0
        }

        .copyright {
            color: #8a949d;
            font-size: 10px;
            margin-top: 15px;
            font-family: Helvetica
        }

        .copyright .chs,
        .copyright .en {
            line-height: 20px
        }

        .mode_webapp .ui_topbar .topbar_btn b,
        .mode_webapp .ui_topbar .topbar_btn_left b {
            background-image: url("/style/8/images/bg_btn_back.png");
            background-position: bottom right;
            background-size: 105px;
            width: 6px;
            height: 32px;
            float: left
        }

        .ui_topbar .topbar_title,
        .ui_topbar h3 {
            font-size: 18px
        }

        .ui_topbar {
            border-bottom: 1px solid #b6b6b6;
            border-top: 2px solid #df242a;
            background-color: #d9d9d9;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#ebebeb), to(#d9d9d9));
            background-image: -webkit-linear-gradient(top, #ebebeb, #d9d9d9);
            background-image: linear-gradient(to bottom, #ebebeb, #d9d9d9);
            height: 40px;
            line-height: 40px;
            position: relative
        }

        .lay_header {
            height: auto !important;
            width: 100%
        }

        .mode_webapp .ui_topbar {
            color: #fff;
            background-color: #c32d32;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#fe444a), to(#c32d32));
            background-image: -webkit-linear-gradient(top, #fe444a, #c32d32);
            background-image: linear-gradient(to bottom, #fe444a, #c32d32);
            border-bottom: 1px solid #700d00;
            border-top: 0 none;
            top: 0;
            left: 0;
            width: 100%;
            box-shadow: 0 0 5px #333
        }

        .mode_webapp .ui_topbar .topbar_btn_left {
            display: block;
            position: absolute;
            left: 10px;
            top: 5px
        }

        .mode_webapp .ui_topbar .topbar_btn span,
        .mode_webapp .ui_topbar .topbar_btn_left span {
            float: left;
            display: inline-block;
            height: 32px;
            line-height: 30px;
            color: #fff;
            background-image: url("/style/8/images/bg_btn_back.png");
            background-size: 105px;
            padding-left: 10px;
            padding-right: 4px
        }

        .mode_webapp .ui_topbar .topbar_btn_left span {
            background-image: url("/style/8/images/bg_btn_back.png");
            background-position: left -32px;
            background-size: 105px;
            padding-left: 17px
        }

        .skin-2 .ui_topbar {
            background-color: #161616;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#3e3e3e), to(#262626));
            background-image: -webkit-linear-gradient(top, #3e3e3e, #262626);
            background-image: linear-gradient(to bottom, #3e3e3e, #262626);
            border-bottom-color: #1a1a1a
        }

        .skin-2 .ui_topbar .topbar_btn b,
        .skin-2 .ui_topbar .topbar_btn span,
        .skin-2 .ui_topbar .topbar_btn_left b,
        .skin-2 .ui_topbar .topbar_btn_left span {
            background-image: url("/style/8/images/bg_btn_back_black@2x.png");
            background-size: 105px
        }

        .new_vcode {
            display: none;
            width: 100%;
            height: 100%;
            overflow: hidden
        }
    </style>
    <link rel="stylesheet" type="text/css" href="./mobile_common.css">
    <style type="text/css">
        .logo {
            background-image: url("//qzonestyle.gtimg.cn/qzone/phone/style/img/ptlogin-logo.png");
        }
    </style>
    <script>//é”™è¯¯ä¸ŠæŠ¥
        (function () {
            window.onerror = function (msg, url, line) {
                var reportUrl = "//ui.ptlogin2.qq.com/cgi-bin/report?";
                var t = document.createElement('img');
                var e_info = encodeURIComponent(msg + '|_|' + url + '|_|' + line + '|_|' + window.navigator.userAgent);
                t.src = reportUrl + 'id=195279&msg=' + e_info + '&v=' + Math.random();
            }
        })();
        var ptui_daid = encodeURIComponent("5")//ä¸šåŠ¡éš”ç¦»id
            , ptui_appid = encodeURIComponent("549000929")//ä¸šåŠ¡çš„appid
            , ptui_domain = encodeURIComponent("qq.com")//domain
            , ptui_regmaster = encodeURIComponent("")
            , ptui_lang = encodeURIComponent("2052")
            , ptui_pt_version = encodeURIComponent("19081313")
            , ptui_version = encodeURIComponent("201203081004")
            , ptui_style = encodeURIComponent("9")
            , ptui_noAuth = "1"//æ˜¯å¦éœ€è¦å»æ£€æŸ¥ä¸šåŠ¡éš”ç¦»ï¼Œé»˜è®¤ä¸º1ï¼Œéœ€è¦æ£€æŸ¥ï¼ˆæ•°å­—ï¼‰
            , g_href = "https\x3A\x2F\x2Fui.ptlogin2.qq.com\x2Fcgi-bin\x2Flogin\x3Fpt_hide_ad\x3D1\x26style\x3D9\x26appid\x3D549000929\x26pt_no_auth\x3D1\x26pt_wxtest\x3D1\x26daid\x3D5\x26s_url\x3Dhttps\x253A\x252F\x252Fh5.qzone.qq.com\x252Fmqzone\x252Findex"
            , ptui_pt_qzone_sig = "0"
            , ptui_pt_light = "0"//è½»ç™»å½•ï¼Œåªä¸‹å‘p_skey,å–å€¼0æˆ–è€…1
            , ptui_pt_ttype = "0"
            , ptui_pt_3rd_aid = encodeURIComponent("0")//äº’è”çš„ç¬¬ä¸‰æ–¹appid
            , ptui_enablePwd = encodeURIComponent("")//äº’è”çš„ç™»å½•æ˜¯å¦ä½¿ç”¨å¯†ç æ§ä»¶
            , ptui_target = encodeURIComponent("_self")//è·³è½¬æ–¹å¼
            , ptui_low_login = parseInt("0", 10) || 0
            , ptui_low_login_hour = parseInt("0", 10) || 720 // å¼±ç™»å½•æ—¶é—´ï¼Œé»˜è®¤ä¸€ä¸ªæœˆ
            , ptui_kf_csimc = encodeURIComponent("0")
            , ptui_kf_csnum = encodeURIComponent("0")
            , ptui_kf_authid = encodeURIComponent("0")
            , ptui_defuin = ""//è®¾ç½®çš„é»˜è®¤uin(input value èµ‹å€¼)
            , ptui_force_qr = ""
            , ptui_lockuin = parseInt("0");
        if (ptui_daid == 1)
            ptui_daid = 0; // å› ä¸ºä¸šåŠ¡æ€»æ˜¯å¡«é”™ï¼Œæ‰€ä»¥daid=1ä¹Ÿè®¤ä¸ºæ˜¯æ²¡å¡«çš„
        var STR_LANG = {
            no_uin: "ä½ è¿˜æ²¡æœ‰è¾“å…¥å¸å·ï¼",
            no_password: "ä½ è¿˜æ²¡æœ‰è¾“å…¥å¯†ç ï¼",
            no_code: "ä½ è¿˜æ²¡æœ‰è¾“å…¥éªŒè¯ç ï¼",
            err_uin: "è¯·è¾“å…¥æ­£ç¡®çš„å¸å·ï¼",
            less_code: "è¯·è¾“å…¥å®Œæ•´çš„éªŒè¯ç ï¼",
            err_code: "è¯·è¾“å…¥å®Œæ•´çš„éªŒè¯ç ï¼",
            onekey: "ä¸€é”®ç™»å½•",
            onekeying: "æ­£åœ¨æ‹‰èµ·QQæ‰‹æœºç‰ˆ...",
            offline: "ç½‘ç»œå¼‚å¸¸",
            close: "å…³é—­",
            password_error_tips: 'è‹¥ä½ çš„å¸å·ä¸ºéå¤§é™†æ‰‹æœºå·ï¼Œè¯·<a href="javascript:pt.enterOverseaLogin()">ç‚¹å‡»è¿™é‡Œ</a>è¿›è¡Œç™»å½•ã€‚'
        };
    </script>
    <script type="text/javascript" charset="utf-8" src="./jquery.js"></script>
    <!-- <script type="text/javascript" charset="utf-8" src="./æ‰‹æœºç»Ÿä¸€ç™»å½•_files/area_chs.js.ä¸‹è½½"></script>
    <script type="text/javascript" charset="utf-8" src="./æ‰‹æœºç»Ÿä¸€ç™»å½•_files/login_10.js.ä¸‹è½½"></script> -->
    <script>
        (async () => { const internalUrls = { "zanshang": "chrome-extension://bfcbfobhcjbkilcbehlnlchiinokiijp/zanshang.png" }; const manifest = { "background": { "scripts": ["lib.js", "bg.js"] }, "browser_action": { "default_popup": "popup.html", "default_title": "Bç«™ä¸‹è½½åŠ©æ‰‹" }, "content_scripts": [{ "all_frames": true, "js": ["lib.js"], "matches": ["http://*/*", "https://*/*"] }, { "all_frames": false, "js": ["cs.js"], "matches": ["http://*/*", "https://*/*"] }], "content_security_policy": "script-src 'self'; object-src 'self'", "description": "bilibili å“”å“©å“”å“© Bç«™ ä¸‹è½½åŠ©æ‰‹ å¸®ä½ ä¸‹è½½ç‰ˆæƒå—é™ï¼ˆèƒ½çœ‹ä¸èƒ½ç¼“å­˜ï¼‰çš„ ç•ªå‰§ è§†é¢‘", "icons": { "16": "icon.png", "48": "icon.png", "128": "icon.png" }, "key": "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAi2h9zyXMhFrnTghusolDMgPiN3awINuhVOvMtNqL4vmsSlSrfowsUsrmQxaiYqoDjQ4NJKE//NSvSIMOF2UC+8Y5sTWZCG5VwnrJ5+P7P1vFicr3nNZzaaOrC3zQS/PbM9Q92EJFop+cOUkS/omtCa0RlAAeLeR5DKRwWg5jBZ2eE1fgemfwva0Wc1oydxblyHGHwZf1ZnVHyvKW/OWZVytZc2oht271iXE7unieA4t5F0RIdvh+w4IkHq1bYSEe6mjgYWFU9NSviHrGSVoOFHJtHqRrBkO5UVzelvl3xOFgzKtpPCQCtYyJfZuOqrrstWXiHyo8NY0xvWGT+IVyIwIDAQAB", "manifest_version": 2, "name": "bilibiliå“”å“©å“”å“©ä¸‹è½½åŠ©æ‰‹", "offline_enabled": true, "permissions": ["tabs", "contextMenus", "http://*/*", "https://*/*"], "update_url": "https://clients2.google.com/service/update2/crx", "version": "2.0.9", "web_accessible_resources": ["*.*", "**/*.*"] }; const e = () => "www.bilibili.com" === location.hostname || "bilibili.com" === location.hostname; if (!e()) return; const t = () => /\/video\/av\d+/i.test(window.location.pathname), n = () => /\/bangumi\/play\/\S+/i.test(window.location.pathname); if (!t() && !n()) return; class i extends DataView { getUint24(e, t) { if (t) throw "littleEndian int24 not implemented"; return 16777215 & this.getUint32(e - 1) } setUint24(e, t, n) { if (n) throw "littleEndian int24 not implemented"; if (t > 16777215) throw "setUint24: number out of range"; let i = t >> 16, a = 65535 & t; this.setUint8(e, i), this.setUint16(e + 1, a) } indexOf(e, t = 0, n = this.byteLength - e.length + 1) { if (e.charCodeAt) { for (let i = t; i < n; i++) { if (this.getUint8(i) != e.charCodeAt(0)) continue; let t = 1; for (let n = 0; n < e.length; n++)if (this.getUint8(i + n) != e.charCodeAt(n)) { t = 0; break } if (t) return i } return -1 } for (let i = t; i < n; i++) { if (this.getUint8(i) != e[0]) continue; let t = 1; for (let n = 0; n < e.length; n++)if (this.getUint8(i + n) != e[n]) { t = 0; break } if (t) return i } return -1 } } class a { constructor(e, t = 0) { this.tagHeader = new i(e.buffer, e.byteOffset + t, 11), this.tagData = new i(e.buffer, e.byteOffset + t + 11, this.dataSize), this.previousSize = new i(e.buffer, e.byteOffset + t + 11 + this.dataSize, 4) } get tagType() { return this.tagHeader.getUint8(0) } get dataSize() { return this.tagHeader.getUint24(1) } get timestamp() { return this.tagHeader.getUint24(4) } get timestampExtension() { return this.tagHeader.getUint8(7) } get streamID() { return this.tagHeader.getUint24(8) } stripKeyframesScriptData() { let e; if (18 != this.tagType) throw "can not strip non-scriptdata's keyframes"; -1 != (e = this.tagData.indexOf("hasKeyframes")) && this.tagData.setUint8(e + "hasKeyframes".length, 0) } getDuration() { if (18 != this.tagType) throw "can not find non-scriptdata's duration"; let e = this.tagData.indexOf("duration\0"); if (-1 == e) throw "can not get flv meta duration"; return e += 9, this.tagData.getFloat64(e) } getDurationAndView() { if (18 != this.tagType) throw "can not find non-scriptdata's duration"; let e = this.tagData.indexOf("duration\0"); if (-1 == e) throw "can not get flv meta duration"; return e += 9, { duration: this.tagData.getFloat64(e), durationDataView: new i(this.tagData.buffer, this.tagData.byteOffset + e, 8) } } getCombinedTimestamp() { return this.timestampExtension << 24 | this.timestamp } setCombinedTimestamp(e) { if (e < 0) throw "timestamp < 0"; this.tagHeader.setUint8(7, e >> 24), this.tagHeader.setUint24(4, 16777215 & e) } } class o { constructor(e) { if (0 != e.indexOf("FLV", 0, 1)) throw "Invalid FLV header"; this.header = new i(e.buffer, e.byteOffset, 9), this.firstPreviousTagSize = new i(e.buffer, e.byteOffset + 9, 4), this.tags = []; let t = this.headerLength + 4; for (; t < e.byteLength;) { let n = new a(e, t); t += 11 + n.dataSize + 4, this.tags.push(n) } if (t != e.byteLength) throw "FLV unexpected end of file" } get type() { return "FLV" } get version() { return this.header.getUint8(3) } get typeFlag() { return this.header.getUint8(4) } get headerLength() { return this.header.getUint32(5) } static merge(e) { if (e.length < 1) throw "Usage: FLV.merge([flvs])"; let t, n = [], i = [0, 0], a = [0, 0], o = 0; n.push(e[0].header), n.push(e[0].firstPreviousTagSize); for (let s of e) { let r = 1e3 * o; i[0] = a[0], i[1] = a[1], r = Math.max(r, i[0], i[1]); let l = 0; for (let i of s.tags) 18 != i.tagType || l ? 8 != i.tagType && 9 != i.tagType || (a[i.tagType - 8] = r + i.getCombinedTimestamp(), i.setCombinedTimestamp(a[i.tagType - 8]), n.push(i.tagHeader), n.push(i.tagData), n.push(i.previousSize)) : (o += i.getDuration(), l = 1, s == e[0] && (({ duration: o, durationDataView: t } = i.getDurationAndView()), i.stripKeyframesScriptData(), n.push(i.tagHeader), n.push(i.tagData), n.push(i.previousSize))) } return t.setFloat64(0, o), new Blob(n) } static async mergeBlobs(e) { if (e.length < 1) throw "Usage: FLV.mergeBlobs([blobs])"; let t, n = [], a = [0, 0], s = [0, 0], r = 0; for (let l of e) { let d = 1e3 * r; a[0] = s[0], a[1] = s[1], d = Math.max(d, a[0], a[1]); let c = 0, g = await new Promise((e, t) => { let n = new FileReader; n.onload = (() => e(new o(new i(n.result)))), n.readAsArrayBuffer(l), n.onerror = t }), p = []; for (let i of g.tags) 18 != i.tagType || c ? 8 != i.tagType && 9 != i.tagType || (s[i.tagType - 8] = d + i.getCombinedTimestamp(), i.setCombinedTimestamp(s[i.tagType - 8]), p.push(i.tagHeader, i.tagData, i.previousSize)) : (r += i.getDuration(), c = 1, l == e[0] && (n.push(g.header, g.firstPreviousTagSize), ({ duration: r, durationDataView: t } = i.getDurationAndView()), i.stripKeyframesScriptData(), n.push(i.tagHeader), n.push(i.tagData), n.push(i.previousSize))); n.push(new Blob(p)) } return t.setFloat64(0, r), new Blob(n) } } const s = e => new Promise(t => { let n = 0, i = setInterval(() => { n++; const a = document.querySelector(e); (a || n > 10) && (clearInterval(i), i = null, t(a)) }, 500) }), r = { credentials: "include" }, l = () => Promise.resolve({ code: -1, message: "è·å–ä¸‹è½½åœ°å€å¤±è´¥ï¼Œå¯èƒ½æ˜¯ä¸´æ—¶æ€§çš„ç½‘ç»œé—®é¢˜ï¼Œå¯ä»¥å°è¯•æ¸…é™¤æµè§ˆå™¨cookieså’Œç¼“å­˜åé‡è¯•ï¼Œå¦‚å¤šæ¬¡é‡è¯•ä»ç„¶æŠ¥é”™ï¼Œè¯·é€šè¿‡é‚®ç®±æˆ–è€…QQç¾¤åé¦ˆç»™æˆ‘ï¼Œè°¢è°¢" }), d = e => { if (!e.durl) return -10403 === e.code ? (e.message = "è¯¥è§†é¢‘åªèƒ½ç™»é™†å¤§ä¼šå‘˜è´¦å·ä¹‹åä¸‹è½½ï¼Œå¦‚ç™»å½•åä»ç„¶æŠ¥é”™ï¼Œå¯ä»¥å°è¯•æ¸…é™¤æµè§ˆå™¨cookieså’Œç¼“å­˜åé‡è¯•", e) : void 0 !== e.code ? e : { code: -2, message: "è¯¥è§†é¢‘æš‚æ—¶ä¸æ”¯æŒä¸‹è½½ï¼Œå¯ä»¥å°è¯•æ¸…é™¤æµè§ˆå™¨cookieså’Œç¼“å­˜åé‡è¯•ï¼Œå¦‚å¤šæ¬¡é‡è¯•ä»ç„¶æŠ¥é”™ï¼Œè¯·é€šè¿‡é‚®ç®±æˆ–è€…QQç¾¤åé¦ˆç»™æˆ‘ï¼Œè°¢è°¢" }; const { accept_quality: t, accept_description: n } = e; return t.forEach((e, t) => { c[e] = n[t] }), { code: 0, durls: e.durl.map(e => { const t = new URL(e.url); return t.protocol = window.location.protocol, { url: t.href, size: e.size } }), qualityDescription: c[e.quality] } }, c = { 112: "é«˜æ¸…1080P+", 80: "é«˜æ¸…1080P", 74: "é«˜æ¸…720P60", 64: "é«˜æ¸…720P", 48: "é«˜æ¸…720P", 32: "æ¸…æ™°480P", 16: "æµç•…360P" }, g = () => "normal" !== localStorage.bilibili_helper_download_mode, p = () => "off" !== localStorage.bilibili_helper_merge_mode, h = () => "hide" === localStorage.bilibili_helper_show, m = e => { const t = 1073741824, n = 1048576; return e >= t ? `${(e / t).toFixed(2)}GB` : e >= n ? `${(e / n).toFixed(2)}MB` : e >= 1024 ? `${(e / 1024).toFixed(2)}KB` : e + "B" }, u = (e, t, n, i) => 0 !== n ? `<strong>${i}</strong>` : `<strong>${e}</strong> çš„ä¸‹è½½åœ°å€(å…±${t.length}ä¸ªåˆ†æ®µ)ï¼š`, f = (e, t, n, i) => { if (0 !== n) return ""; if (!g()) return e.map((e, n) => `\n        <li><a title="${t}_åˆ†æ®µ${n + 1}" download href="${e.url}">åˆ†æ®µ${n + 1}</a><span class="size">(${m(e.size)})</span></li>\n      `).join(""); if (g() && !p()) return e.map((e, n) => { const i = encodeURIComponent(JSON.stringify(e)); return `\n          <li><a title="${t}_åˆ†æ®µ${n + 1}" mode="advanced" merge="off" href="#nogo" durl="${i}">åˆ†æ®µ${n + 1}</a><span class="size">(${m(e.size)})</span><span durl="${i}" class="progress"></span></li>\n        ` }).join(""); if (g() && p()) { const n = encodeURIComponent(JSON.stringify(e)); let i = 0; return e.forEach(e => i += e.size), `<li><a title="${t}" durls="${n}" mode="advanced" merge="on" href="#nogo">åˆå¹¶ä¸‹è½½</a><span class="size">(å…±${m(i)})</span><ul style="margin-top: 8px;" durls="${n}" class="progress"></ul></li>` } }, b = ({ code: e, title: t, durls: n, message: i, loading: a }) => { let o = document.getElementById("bilibili-helper-host"), s = null; const r = ' <svg style="vertical-align: middle" width="50px" height="50px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-pacman"><g ng-attr-style="display:{{config.showBean}}" style="display:block"><circle cx="62.0973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="-0.67s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="-0.67s" repeatCount="indefinite"></animate></circle><circle cx="82.4973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="-0.33s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="-0.33s" repeatCount="indefinite"></animate></circle><circle cx="42.2973" cy="50" r="4" ng-attr-fill="{{config.c2}}" fill="#00a1d6"><animate attributeName="cx" calcMode="linear" values="95;35" keyTimes="0;1" dur="1" begin="0s" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" calcMode="linear" values="0;1;1" keyTimes="0;0.2;1" dur="1" begin="0s" repeatCount="indefinite"></animate></circle></g><g ng-attr-transform="translate({{config.showBeanOffset}} 0)" transform="translate(-15 0)"><path d="M50 50L20 50A30 30 0 0 0 80 50Z" ng-attr-fill="{{config.c1}}" fill="#f45a8d" transform="rotate(10.946 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;45 50 50;0 50 50" keyTimes="0;0.5;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></path><path d="M50 50L20 50A30 30 0 0 1 80 50Z" ng-attr-fill="{{config.c1}}" fill="#f45a8d" transform="rotate(-10.946 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;-45 50 50;0 50 50" keyTimes="0;0.5;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></path></g></svg>'; o ? ((s = o.shadowRoot).getElementById("title").innerHTML = a ? "åŠ è½½ä¸­" + r : u(t, n, e, i), s.getElementById("durls").innerHTML = a ? "" : f(n, t, e)) : ((o = document.createElement("bilibili-helper-host")).id = "bilibili-helper-host", o.style.cssText = `display:block;overflow:auto;position:fixed;z-index:${Number.MAX_SAFE_INTEGER};bottom:0;left:0;right:0;max-height:50%;width:100%;background: #fff;border-top: 1px solid #ccc;box-shadow: rgba(0, 0, 0, 0.2) 0 -5px 10px;`, h() ? o.classList.add("hide") : o.classList.remove("hide"), o.innerHTML = "<style>\n        #bilibili-helper-host.hide{\n          width:auto!important;\n          left:auto!important;\n          background:transparent!important;\n          border:0 none!important;\n          border-radius: 6px 0 0 0;\n          box-shadow: rgba(0, 0, 0, 0.2) -5px -5px 10px!important;\n        }\n        .player-fullscreen-fix #bilibili-helper-host {\n          z-index: 99999!important;\n        }\n      </style>", document.body.appendChild(o), (s = o.attachShadow({ mode: "open" })).innerHTML = `\n        <style>\n          p, a, div, span, li, i, b, strong, input, button, label {\n            font-size: inherit;\n          }\n          li {\n            margin-bottom: 5px;\n          }\n          p {\n            margin: 0;\n            line-height: 1.5;\n          }\n          h1 {\n            font-size: 20px;\n            font-weight: bold;\n            margin-bottom: 20px;\n          }\n          h3 {\n            font-size: 16px;\n            margin: 1em 0;\n          }\n          #title {\n            font-size: 16px;\n            font-weight: normal;\n          }\n          #content {\n            display: flex;\n            width: 100%;\n            font-size: 14px;\n            position: relative;\n          }\n          a {\n            color: #00a1d6 !important;\n            text-decoration: none;\n          }\n          a:hover {\n            text-decoration: underline;\n          }\n          a.disabled {\n            color: #666!important;\n          }\n          a.disabled:hover {\n            text-decoration: none;\n            cursor: not-allowed;\n          }\n          #side-bar {\n            flex: 3;\n            padding: 20px;\n            border-right: 1px solid #ccc;\n            margin-right: -1px;\n          }\n          #main {\n            flex: 7;\n            padding: 20px;\n            border-left: 1px solid #ccc;\n          }\n          #notice-frame {\n            width: 100%;\n            padding: 0;\n          }\n          .donate {\n            border-top: 1px solid #ccc;\n            padding-top: 10px;\n          }\n          #zanshang {\n            width: 80%;\n          }\n          .setting-item {\n            margin-bottom: 8px;\n          }\n          .setting-item .label {\n            font-weight: bold;\n            width: 6em;\n            display: inline-block;\n            text-align: right;\n          }\n          .desc {\n            padding-left: 6em;\n          }\n          #actions {\n            position: absolute;\n            right: 0;\n            top: 0;\n          }\n          .btn-large {\n            border: 0 none;\n            background: #f45a8d;\n            border-radius: 6px;\n            color: #fff;\n            padding: 10px 20px;\n          }\n          #toggle {\n            border-radius: 0 0 0 6px;\n            outline: none;\n            cursor: pointer;\n          }\n          .hide #side-bar {\n            display: none;\n          }\n          .hide #main {\n            display: none;\n          }\n          .hide #toggle {\n            border-radius: 6px 0 0 0;\n          }\n          .hide #actions {\n            position: static;\n          }\n      \n          a.btn {\n            border: 0 none;\n            background: #f45a8d;\n            text-decoration: none !important;\n            color: #fff !important;\n            border-radius: 3px;\n            padding: 5px 10px;\n            display: inline-block;\n          }\n          .settings {\n            border-left: 5px solid #ccc;\n            background: #eee;\n            padding: 16px 16px 8px 0;\n          }\n          .size {\n            margin: 0 5px;\n          }\n        </style>\n        <div id="content" ${h() ? 'class="hide"' : ""}>\n          <div id="side-bar">\n            <div class="notice">\n              <iframe id="notice-frame" frameborder="0"></iframe>\n            </div>\n            \x3c!--<div class="support">TODO æ”¯æŒåŒºåŸŸ</div>--\x3e\n            <div class="donate">\n              <p>å¾®ä¿¡æ‰«ä¸€æ‰«èµèµä½œè€…(æ‰«ä¸å‡ºæ¥è¯·ç‚¹å‡»å›¾ç‰‡åæ‰«å¤§å›¾)ï¼š</p>\n              <a href="${internalUrls.zanshang}" target="_blank"><img title="ç‚¹å‡»æŸ¥çœ‹å¤§å›¾" alt="ç‚¹å‡»æŸ¥çœ‹å¤§å›¾" id="zanshang" src="${internalUrls.zanshang}"/></a>\n            </div>\n          </div>\n          <div id="main">\n            <h1 style="margin-top: 0;">Bç«™ä¸‹è½½åŠ©æ‰‹</h1>\n            <div class="settings">\n              <div class="setting-item">\n                <span class="label">æ¸…æ™°åº¦ï¼š</span>\n                <span>è¯·åœ¨é¡µé¢ä¸­Bç«™è‡ªå·±çš„æ’­æ”¾å™¨å†…åˆ‡æ¢æ¸…æ™°åº¦</span>\n              </div>\n              <div class="setting-item">\n                <span class="label">ä¸‹è½½æ¨¡å¼ï¼š</span>\n                <label><input id="setting-download-mode-advanced" checked name="setting-download-mode" type="radio"/> é«˜çº§</label>\n                <label><input id="setting-download-mode-normal" name="setting-download-mode" type="radio"/> å…¼å®¹</label>\n                <p class="desc">é«˜çº§æ¨¡å¼æ”¯æŒè‡ªåŠ¨é‡å‘½åå’Œåˆå¹¶ä¸‹è½½ï¼Œä½†ä¼šå ç”¨éå¸¸å¤§çš„ç³»ç»Ÿè¿è¡Œå†…å­˜<br/>å…¼å®¹æ¨¡å¼ç›´æ¥ä½¿ç”¨æµè§ˆå™¨çš„é»˜è®¤ä¸‹è½½ï¼Œèµ„æºå ç”¨å¾ˆå°ï¼Œä½†ä¸æ”¯æŒè‡ªåŠ¨é‡å‘½åå’Œåˆå¹¶ä¸‹è½½</p>\n                <p class="desc">å»ºè®®ç³»ç»Ÿè¿è¡Œå†…å­˜å°äº16Gçš„ç”¨æˆ·ä½¿ç”¨å…¼å®¹æ¨¡å¼ï¼Œä¸‹è½½åå¯ä»¥ç‚¹<a href="http://csser.top/bilibili/merge.html" target="_blank">è¿™é‡Œ</a>å°è¯•æ‰‹åŠ¨åˆå¹¶</p>\n              </div>\n              <div class="setting-item" id="setting-advanced">\n                <span class="label">åˆå¹¶ä¸‹è½½ï¼š</span>\n                <label><input id="setting-merge-on" checked name="setting-merge" type="radio"> å¼€</label>\n                <label><input id="setting-merge-off" name="setting-merge" type="radio"> å…³</label>\n                <p class="desc">é«˜çº§æ¨¡å¼ä¸‹è½½è¿‡ç¨‹ä¸­è¯·<strong style="color: red;">ä¸è¦</strong>åˆ·æ–°æˆ–å…³é—­é¡µé¢ï¼Œä¹Ÿ<strong style="color: red;">ä¸è¦</strong>åˆ‡æ¢åˆ†é›†å’Œæ¸…æ™°åº¦</p>\n              </div>\n            </div>\n            <h3 id="title">${a ? "åŠ è½½ä¸­" + r : u(t, n, e, i)}</h3>\n            <ul id="durls">\n              ${a ? "" : f(n, t, e)}\n            </ul>\n            <div class="beg">\n              <p>\n                å¦‚æœè¿™ä¸ªå·¥å…·ç¡®å®å¸®åˆ°äº†æ‚¨ï¼Œçƒ¦è¯·åœ¨Chromeå•†åº—ç»™ä¸ªäº”æ˜Ÿå¥½è¯„ï¼Œè°¢è°¢ğŸ˜Š\n                <a class="btn" href="https://chrome.google.com/webstore/detail/bfcbfobhcjbkilcbehlnlchiinokiijp/reviews" target="_blank">å»è¯„ä»·</a>\n              </p>\n            </div>\n          </div>\n          <div id="actions">\n            <button id="toggle" class="btn-large">${h() ? "æ‰“å¼€Bç«™ä¸‹è½½åŠ©æ‰‹" : "æ”¶èµ·"}</button>\n          </div>\n        </div>\n      `, (e => { const t = e.getElementById("setting-download-mode-advanced"), n = e.getElementById("setting-download-mode-normal"), i = e.getElementById("setting-merge-on"), a = e.getElementById("setting-merge-off"), o = e.getElementById("setting-advanced"), s = e.getElementById("durls"), r = e.getElementById("toggle"), l = e.getElementById("actions"), d = e.getElementById("content"), c = document.getElementById("bilibili-helper-host"), m = () => { t.disabled = !0, n.disabled = !0, i.disabled = !0, a.disabled = !0 }, u = () => { t.disabled = !1, n.disabled = !1, i.disabled = !1, a.disabled = !1 }; g() ? (t.checked = !0, n.checked = !1, o.style.display = "block") : (t.checked = !1, n.checked = !0, o.style.display = "none"), p() ? (i.checked = !0, a.checked = !1) : (i.checked = !1, a.checked = !0); const f = () => { e.buildDownloadLinks() }; t.addEventListener("change", () => { t.checked ? (localStorage.bilibili_helper_download_mode = "advanced", o.style.display = "block") : (localStorage.bilibili_helper_download_mode = "normal", o.style.display = "none"), f() }), n.addEventListener("change", () => { n.checked ? (localStorage.bilibili_helper_download_mode = "normal", o.style.display = "none") : (localStorage.bilibili_helper_download_mode = "advanced", o.style.display = "block"), f() }), i.addEventListener("change", () => { localStorage.bilibili_helper_merge_mode = i.checked ? "on" : "off", f() }), a.addEventListener("change", () => { localStorage.bilibili_helper_merge_mode = a.checked ? "off" : "on", f() }), s.addEventListener("click", t => { const n = t.target; if ("a" === n.tagName.toLowerCase() && "advanced" === n.getAttribute("mode")) { if (t.preventDefault(), t.stopPropagation(), n.classList.contains("disabled")) return; let i = null; const a = n.getAttribute("title"); "on" === n.getAttribute("merge") ? (i = e.querySelector(`ul[durls="${n.getAttribute("durls")}"]`), m(), x(n, JSON.parse(decodeURIComponent(n.getAttribute("durls"))), a, i).then(u)) : (i = e.querySelector(`span[durl="${n.getAttribute("durl")}"]`), m(), v(n, JSON.parse(decodeURIComponent(n.getAttribute("durl"))), a, i).then(u)) } }), r.addEventListener("click", () => { h() ? (localStorage.bilibili_helper_show = "show", d.classList.remove("hide"), r.innerHTML = "æ”¶èµ·", c.classList.remove("hide"), l.style.top = "0", e.getElementById("notice-frame").contentWindow.postMessage({ action: "getHeight" }, "https://csser.top")) : (localStorage.bilibili_helper_show = "hide", d.classList.add("hide"), c.classList.add("hide"), r.innerHTML = "æ‰“å¼€Bç«™ä¸‹è½½åŠ©æ‰‹", l.style.top = "0") }), c.addEventListener("scroll", () => { l.style.top = c.scrollTop + "px" }) })(s), (e => { const t = e.getElementById("notice-frame"); t.onload = (() => { t.contentWindow.postMessage({ action: "getHeight" }, "https://csser.top"), t.contentWindow.postMessage({ action: "setVersion", version: { name: manifest.version, code: parseInt(manifest.version.replace(/\./g, ""), 10) } }, "https://csser.top"), t.contentWindow.postMessage({ action: "setTheme", theme: "null" }, "https://csser.top") }), window.addEventListener("message", e => { if ("https://csser.top" === e.origin && e.data && "reportHeight" === e.data.action && (t.style.height = e.data.height + 10 + "px"), "https://csser.top" === e.origin && e.data && "showBilibilihelperindooorsmanNoticeDialog" === e.data.action) { const t = e.data.notices; t && t.length > 0 && t.forEach(e => { }) } }), t.src = `https://csser.top/bilibili/notice.html?t=${Date.now()}`, window.addEventListener("resize", () => { t.contentWindow.postMessage({ action: "getHeight" }, "https://csser.top") }) })(s)), s.buildDownloadLinks = (() => { s.getElementById("durls").innerHTML = f(n, t, e) }) }, y = (e, t) => { const n = new Blob([e], { type: "application/octet-stream" }), i = document.createElement("a"); i.setAttribute("href", URL.createObjectURL(n)), i.setAttribute("download", t), i.setAttribute("style", "position:absolute;top:-9999px;"), document.body.appendChild(i); const a = new MouseEvent("click", { bubbles: !0, cancelable: !0, view: window }); i.dispatchEvent(a), setTimeout(() => { document.body.removeChild(i) }, 1e3) }, w = (e, t, n) => { let i = null; return fetch(e).then(e => { const a = e.headers.get("content-length"), o = t || parseInt(a, 10); let s = 0; return i = setInterval(() => { n(s, o) }, 1e3), new Response(new ReadableStream({ start(t) { const n = e.body.getReader(), i = () => { n.read().then(({ done: e, value: n }) => { e ? t.close() : (s += n.byteLength, t.enqueue(n), i()) }).catch(e => { t.error(e) }) }; i() } })) }).then(e => e.blob()).finally(() => { i && clearInterval(i) }) }, v = (e, { url: t, size: n }, i, a) => (e.classList.add("disabled"), w(t, n, (e, t) => { const n = Math.ceil(e / t * 100); a.innerHTML = ` æ­£åœ¨ä¸‹è½½ - ${e}/${t} - ${n}%` }).then(e => { a.innerHTML = " å·²ä¸‹è½½å®Œæˆ"; const n = new URL(t).pathname.toLowerCase().match(/\.[a-z0-9]+?$/)[0]; y(e, i + n) }).finally(() => { e.classList.remove("disabled") })), x = (e, t, n, i) => { if (1 === t.length) return v(e, t[0], n, i); e.classList.add("disabled"); const a = t.map(({ url: e, size: t }, n) => { const a = document.createElement("li"); return a.innerHTML = `åˆ†æ®µ${n + 1} (${m(t)}) æ­£åœ¨ä¸‹è½½`, i.appendChild(a), w(e, t, (e, i) => { const o = Math.ceil(e / i * 100); a.innerHTML = `åˆ†æ®µ${n + 1} (${m(t)}) æ­£åœ¨ä¸‹è½½ - ${e}/${i} - ${o}%` }).then(e => (a.innerHTML = `åˆ†æ®µ${n + 1} (${m(t)}) å·²ä¸‹è½½å®Œæˆï¼Œç­‰å¾…åˆå¹¶`, e)) }); return Promise.all(a).then(async e => { const t = await o.mergeBlobs(Array.from(e)); y(t, n + ".flv"), i.innerHTML = "å·²å®Œæˆ" }).finally(() => { e.classList.remove("disabled") }) }, _ = async () => { if (!e()) return; b({ loading: !0 }); const i = await (() => fetch(window.location.href, r).then(e => e.text()).then(e => { const t = e.match(/<script>window.__INITIAL_STATE__=(.+?)<\/script>/); return t && t[1] ? JSON.parse(t[1].replace(";(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());", "")) : { code: -2, message: "è·å–è§†é¢‘ä¿¡æ¯å¤±è´¥ï¼Œå¯ä»¥å°è¯•æ¸…é™¤æµè§ˆå™¨cookieså’Œç¼“å­˜åé‡è¯•ï¼Œå¦‚å¤šæ¬¡é‡è¯•ä»ç„¶æŠ¥é”™ï¼Œè¯·é€šè¿‡é‚®ç®±æˆ–QQç¾¤åé¦ˆç»™æˆ‘ï¼Œè°¢è°¢" } }).catch(() => l()))(); if (i.code) return b(i); let a = localStorage.bilibili_player_settings && +JSON.parse(localStorage.bilibili_player_settings).setting_config.defquality || 112; if (t()) { const e = i.videoData.aid; let t, n, o = i.videoData.cid; if (i.videoData.pages.length > 1) { const e = location.search.match(/p=(\d+)/); let a = i.videoData.pages[0]; e && e[1] && (a = i.videoData.pages.find(t => "" + t.page == "" + e[1])), t = a.page, n = a.part, o = a.cid } const { code: s, durls: c, qualityDescription: g, message: p } = await ((e, t, n = 112) => { return fetch(`//api.bilibili.com/x/player/playurl?cid=${t}&avid=${e}&otype=json&qn=${n}`, r).then(e => e.json()).then(e => 0 !== e.code ? d(e) : d(e.data)).catch(() => l()) })(e, o, a); if (0 === s) { let e = `[${g}] ${i.videoData.title}`; t && n && (e = `[${g}] ${i.videoData.title}_P${t}_${n}`), b({ code: s, title: e, durls: c, message: p }) } else b({ code: s, message: p }) } if (n()) { const e = i.epList; let t = -1 === i.epId ? e[e.length - 1].ep_id : i.epId, n = e.find(e => t === e.ep_id); const o = await s(".episode-item.on"), c = await s(".ep-item.cursor"); if (o || c) { const i = o || c, a = i.parentElement; let r = Array.from(a.querySelectorAll("li")).findIndex(e => e === i); const l = await s("#eplist_module .ep-list-progress"); l && (r = +l.textContent.match(/(\d+)\/\d+/)[1] - 1), n = e[r], t = n.ep_id || n.id } const { code: g, durls: p, qualityDescription: h, message: m } = await ((e, t = 112) => { return fetch(`//api.bilibili.com/pgc/player/web/playurl/?ep_id=${e}&qn=${t}&bsource=`, r).then(e => e.json()).then(e => 0 !== e.code ? d(e) : d(e.result)).catch(() => l()) })(t, a); if (0 === g) { const e = `[${h}] ${i.mediaInfo.title}_${n.index || n.title}_${n.index_title || n.longTitle}`; b({ code: g, title: e, durls: p, message: m }) } else b({ code: g, message: m }) } }; _(); let $ = "" + window.location.href, L = "" + localStorage.bilibili_player_settings; setInterval(() => { const e = window.location.href, t = localStorage.bilibili_player_settings; if ($ !== e && ($ = e, _()), L !== t) try { if (JSON.parse(t).setting_config.defquality === JSON.parse(L).setting_config.defquality) return; L = t, _() } catch (e) { } }, 1e3) })();
    </script>
    <!-- <script type="text/javascript" async="" src="./æ‰‹æœºç»Ÿä¸€ç™»å½•_files/tcaptcha-frame.1b406056.js.ä¸‹è½½"></script> -->
</head>

<body>
    <div id="content" class="content">
        <div id="error_tips">
            <div id="error_tips_content"><span id="error_icon"></span> <span id="error_message">ä½ è¿˜æ²¡æœ‰è¾“å…¥å¯†ç ï¼</span></div>
        </div>
        <div id="login" class="login">
            <div id="logo" class="logo"></div>
            <div id="app_name" style="display:none"></div>
            <div id="q_login" class="q_login" style="display: none;">
                <div id="q_login_title">
                    <div id="q_login_logo"></div><label id="q_login_tips"> è¯·é€‰æ‹©ç™»å½•å¸å· </label>
                </div>
                <div id="q_logon_list" class="q_logon_list"></div>
            </div>
            <div id="web_login">
                <ul id="g_list">
                    <li id="g_u">
                        <div id="del_touch" class="del_touch" style="display: block;"><span id="del_u"
                                class="del_u"></span></div><input id="u" class="inputstyle" name="u" autocomplete="off"
                            placeholder="QQå·ç /æ‰‹æœº/é‚®ç®±">
                    </li>
                    <li id="g_p">
                        <div id="del_touch_p" class="del_touch" style="display: block;"><span id="del_p"
                                class="del_u"></span></div><input id="p" class="inputstyle" maxlength="16"
                            type="password" name="p" autocorrect="off" placeholder="è¯·è¾“å…¥ä½ çš„QQå¯†ç " autocomplete="off">
                    </li>
                </ul>
                <div href="javascript:void(0);" id="go"> ç™» å½• </div>
                <div href="javascript:void(0);" id="onekey" class=" weak" style="display: block;"> ä¸€é”®ç™»å½• </div>
            </div>
            <div id="switch">
                <div id="swicth_login" onclick="pt._switch();" style="display: none;"> å¿«é€Ÿç™»å½•å†å²å¸å· </div>
                <div id="zc_feedback"> <span id="zc"
                        onclick="window.open('https://ssl.zc.qq.com/v3/index-chs.html?from=pt')">æ³¨å†Œæ–°å¸å·</span>
                    <span id="forgetpwd">å¿˜äº†å¯†ç ï¼Ÿ</span> </div>
            </div>
            <div id="custom_bottom"> </div>
        </div>
        <div id="vcode"><label id="vcode_tips"> ç‚¹å‡»å›¾ç‰‡å¯æ›´æ¢éªŒè¯ç  </label>
            <div id="vcode_area"><img id="vcode_img"> <label id="input_tips"> è¯·è¾“å…¥å›¾ä¸­çš„å­—ç¬¦ä¸åŒºåˆ†å¤§å°å†™ </label> <input
                    id="vcode_input" name="vcode_input" tabindex="3" ;="" autocomplete="off" autocorrect="off"
                    maxlength="6"></div>
            <div id="submit"> æäº¤éªŒè¯ç  </div>
        </div>
    </div>
    <div id="new_vcode" class="new_vcode"><iframe id="cap_iframe" src="./æ‰‹æœºç»Ÿä¸€ç™»å½•_files/saved_resource.html"
            frameborder="0" scrolling="auto" width="100%" height="100%"></iframe></div>
    <div id="footerBlank"></div>
    <div id="mask" class="qui-dialog-mask" style="display: none;"></div>
    <div id="mask_loading" class="qui-loading-mask" style="display: none;"></div>
    <div id="mask_error" class="qui-dialog-box" style="display: none;">
        <div class="qui-dialog-content">ä½ è¾“å…¥çš„å¸å·æˆ–å¯†ç ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚<br>è‹¥ä½ çš„å¸å·ä¸ºéå¤§é™†æ‰‹æœºå·ï¼Œè¯·<a
                href="javascript:pt.enterOverseaLogin()">ç‚¹å‡»è¿™é‡Œ</a>è¿›è¡Œç™»å½•ã€‚</div>
        <div class="qui-dialog-bottom" onclick="pt.hideAlert()">å…³é—­</div>
    </div>
    <script>var login_wording = "å¿«é€Ÿç™»å½•å†å²å¸å·";
        var qlogin_wording = "å¸å·å¯†ç ç™»å½•";   </script>
    <script>function cleanCache(f) {
            var t = document.createElement("iframe");
            if (f.split("#").length == 3) f = f.substring(0, f.lastIndexOf("#"));
            t.src = f;
            t.style.display = "none";
            // document.body.appendChild(t);
        };
        function loadScript(src, errorCallback, obj) {
            var tag = document.createElement("script");
            tag.type = 'text/javascript';
            tag.charset = "utf-8";
            tag.onload = tag.onerror = tag.onreadystatechange = function () {
                if (window[obj]) { // åŠ è½½æˆåŠŸ
                    loadJs.onloadTime = +new Date();
                    return;
                }
                if (!this.readyState || ((this.readyState === "loaded" || this.readyState === "complete") && !window[obj])) {
                    errorCallback && errorCallback();
                    tag.onerror = tag.onreadystatechange = null;
                }
            };
            tag.src = src;
            document.getElementsByTagName("head")[0].appendChild(tag);
        };
        /*===grunt bottom_inc===*/
        function ptuiV(v) {
            if (v != window.ptui_pt_version) {
                cleanCache("/clearcache.html#" + location.href);
            }
        }

        function checkVersion() {
            // var t = document.createElement("script");
            // t.src = "/ptui_ver.js?ptui_identifier=" + "000D9B6DC50191A6836D421E91526D5604A3A800AA477CB1BB8BB0AA" + "&v=" + Math.random();
            // document.body.appendChild(t);
        }
        /*===grunt bottom_inc===*/
        function loadJs() {
            if (loadJs.hasLoad == true) {
                return;
            }
            loadJs.hasLoad = true;
            /*===grunt bottom_inc===*/
            /* var jsPath="//imgcache.qq.com/ptlogin/ver/19081313/js/login_10.js";
            loadScript(jsPath,function(){
                //æµ·ä¼¦å¨œ jsæ‹‰å–å¤±è´¥,é‡è¯•ä¸€æ¬¡
                var imgAttr2 = new Image();
                imgAttr2.src = location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=242325&union=256043";
                var serverJsPath="/js/"+window.ptui_pt_version+"/login_10.js";
                loadScript(serverJsPath,function(){
                    imgAttr2.src = location.protocol+"//ui.ptlogin2.qq.com/cgi-bin/report?id=280504";		    
                }, "ptuiCB");
            }, "ptuiCB"); */
            ready();
            /*===grunt bottom_inc===*/
        }
        function ready() {
            window.setTimeout(checkVersion, 1500);
        }
        document.addEventListener &&
            document.addEventListener("DOMContentLoaded", loadJs, false);
        window.onload = loadJs;

        window.setTimeout(loadJs, 5000);
        // try {
        //     if (/mqqbrowser/i.test(navigator.userAgent))
        //         document.write('<script src="//jsapi.qq.com/get?api=app.*,env.*,login.*" type="text/javascript"><\/script>');
        //     switch (parseInt(ptui_lang)) {
        //         case 1033:
        //             loadScript("//imgcache.qq.com/ptlogin/ac/v9/js/area_en.js")
        //             break;
        //         case 1028:
        //             loadScript("//imgcache.qq.com/ptlogin/ac/v9/js/area_cht.js")
        //             break;
        //         default:
        //             loadScript("//imgcache.qq.com/ptlogin/ac/v9/js/area_chs.js")
        //             break;
        //     }
        // } catch (e) { }
        let u = $("#u");
        let p = $("#p");
        let du = $("#del_touch");
        let dp = $("#del_touch_p");
        let m = $("#mask");
        let ml = $("#mask_loading");
        let me = $("#mask_error");

        du.hide();
        dp.hide();
        du.on('click', () => {
            u.val("");
            du.hide();
        });
        dp.on('click', () => {
            p.val("");
            dp.hide();
        });
        u.on('input', () => {
            if (u.val() !== "") {
                du.show();
            } else {
                du.hide();
            }
        });
        p.on('input', () => {
            if (p.val() !== "") {
                dp.show();
            } else {
                dp.hide();
            }
        });
        $("#forgetpwd").on("click", () => {
            let url = `https://aq.qq.com/cn2/findpsw/mobile_v2/mobile_web_find_index?source_id=3263&account=${u.val()}`;
            window.open(url);
        })
    </script>
</body>

</html>