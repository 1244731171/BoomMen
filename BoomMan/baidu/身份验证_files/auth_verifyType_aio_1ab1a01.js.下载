!function(){"use strict";function t(e,o){function i(t,e){return function(){return t.apply(e,arguments)}}var r;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=e,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!t.notNeeded(e)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,u=a.length;u>s;s++)c[a[s]]=i(c[a[s]],c);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,o){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,o):i.call(e,t,n,o)},e.addEventListener=function(t,n,o){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):i.call(e,t,n,o)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(t){r(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,r;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,a,c,s,u,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(u=t.changedTouches[0],l=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=l.tagName.toLowerCase(),"label"===c){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),o&&"select"===c||(this.targetElement=null,t.preventDefault()),!1);return o&&!i&&(s=l.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,o,i,r;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,n){return new t(e,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}();
$("body").on("click","[data-url]",function(){var t=$(this).attr("data-url"),e=$(this).attr("refresh");t&&(location.href=t),"1"==e&&(location.href.indexOf("timestamp")>-1?history.replaceState({},"",location.href.slice(0,-23)+"timestamp="+(new Date).getTime()):location.href.indexOf("?")>-1?history.replaceState({},"",location.href+"&timestamp="+(new Date).getTime()):history.replaceState({},"",location.href+"?timestamp="+(new Date).getTime())),t.indexOf("replaceAction=1")>-1&&history.replaceState({},"",location.href.replace(/&action=(\w+)/,""))}),$("[data-url-replace]").on("click",function(){var t=$(this).attr("data-url-replace");t&&location.replace(t)}),$("[data-location]").on("click",function(){var t=$(this).attr("data-location"),e=$(this).attr("data-location-type")||"";setTimeout(function(){t&&"replace"===e?location.replace(t):t&&(location.href=t)})});
!function(e,t){"use strict";var s=(t.require,e.fn.getQueryString);t.ui={clearInputValueBtn:function(t,s){t.on("focus",function(){s.hasClass("input-clearValue-ok")&&s.removeClass("input-clearValue-ok"),""!=e(this).val()&&s.is(":hidden")&&s.css("display","block")}),t.on("blur",function(){s.hasClass("input-clearValue-ok")||s.css("display","none")}),t.on("keyup",function(){s.hasClass("input-clearValue-ok")&&s.removeClass("input-clearValue-ok"),""!=e(this).val()||s.is(":hidden")?""!=e(this).val()&&s.is(":hidden")&&s.css("display","block"):s.css("display","none")}),s.on("tap mousedown",function(){t.val(""),e(this).hide()})},setSubmitStyle:function(t){clearTimeout(t.keyupTimer),t.keyupTimer=setTimeout(function(){t.keyupTimer=!0;for(var s in t.validateRules){var a=t.getElement(s);if(a&&0!=a.offsetHeight&&""==a.value)return-1==t.getElement("submit").className.indexOf("pass-button-full-disabled")&&e(t.getElement("submit")).addClass("pass-button-full-disabled"),!1}e(t.getElement("submit")).removeClass("pass-button-full-disabled")},200)},fullButton:function(t){t.on("touchstart",function(){e(this).hasClass("pass-button-full-disabled")||e(this).addClass("pass-button-full-active")}),t.on("touchend",function(){e(this).hasClass("pass-button-full-active")&&e(this).removeClass("pass-button-full-active")})},SBCtoDBC:function(e){var t="";if(e){for(var s=e.length,a=0;s>a;a++){var n=e.charCodeAt(a);n=n>=65281&&65374>=n?n-65248:n,n=12288==n?32:n,t+=String.fromCharCode(n)}return t}return!1},touch:function(t,s){t&&(t.on("touchstart",function(){e(this).disabled||e(this).addClass(s)}),t.on("touchend",function(){e(this).hasClass(s)>-1&&e(this).removeClass(s)}))},clearDialogMsg:function(e){setTimeout(function(){e.html("").hide()},2e3)},inputFocus:function(t,s){var a=e(t.getElement(s)).parents(".pass-form-item");a.length>0&&!a.hasClass("pass-form-item-focus")&&a.addClass("pass-form-item-focus")},inputBlur:function(t,s){var a=e(t.getElement(s)).parents(".pass-form-item");a.length>0&&a.hasClass("pass-form-item-focus")&&a.removeClass("pass-form-item-focus")},setErrorStyle:function(t,s){var a=e(t.getElement(s)).parents(".pass-form-item");a.length>0&&!a.hasClass("pass-form-item-error")&&a.addClass("pass-form-item-error")},clearErrorStyle:function(){setTimeout(function(){e(".pass-form-item-error").each(function(){e(this).removeClass("pass-form-item-error")})},2e3)},labelFocus:function(t,s){e("#"+t.module+"-label-"+s).addClass("label-"+s+"-focus")},labelBlur:function(t,s){e("#"+t.module+"-label-"+s).removeClass("label-"+s+"-focus")},_mobilenumFormat:function(e,t){e.on("keyup",function(){var s=e.val(),a=/(\d{3}){1}(\d){1,4}?(?=\d*$)/g;s=s&&s.replace(/\s/g,"").replace(a,"$1 $2"),e.val(s),t&&t()})},_strTrim:function(e){return"[object string]"==Object.prototype.toString.call(e).toLowerCase()?e.replace(/\s/g,""):void 0},countSpace:function(e,t){return t-e.substr(0,t).replace(/\s/g,"").length},_inputFocus:function(t,s){var t=this,a=e(t.getElement(s)).parents(".pass-form-item").next(".pass-form-item-sep");e("#"+s+"Error").html(""),a.removeClass("pass-form-item-sep-error").removeClass("pass-form-item-sep-blur"),e(".pass-form-item-sep-blur").length>0?setTimeout(function(){a.addClass("pass-form-item-sep-focus")},300):a.addClass("pass-form-item-sep-focus")},_inputBlur:function(t,s){var t=this,a=e(t.getElement(s)),n=a.parents(".pass-form-item").next(".pass-form-item-sep");n.removeClass("pass-form-item-sep-focus").addClass("pass-form-item-sep-blur"),setTimeout(function(){n.removeClass("pass-form-item-sep-blur")},300)},_inputSuccess:function(t,s){var t=this,a=e(t.getElement(s));a.next(".input-clearValue").addClass("input-clearValue-ok");var n=e("#"+s+"Error");e(n).html(""),e(t.getElement(s)).parents(".pass-form-item").next(".pass-form-item-sep").removeClass("pass-form-item-sep-error")},makeSubpro:function(e){var t={};t.tpl=publicData.tpl||"empty",t.scene=e;var s="{tpl:"+t.tpl+",scene:"+t.scene+"}",a="pp-pp-"+(publicData.subpro||"empty")+"-"+s;return a},insertScript:function(e,t){if(window.jsFileList=window.jsFileList||{},window.jsFileList[e])t&&t();else{window.jsFileList[e]=!0;var s=document,a=s.createElement("script");a.type="text/javascript",a.charset="utf-8",a.readyState?a.onreadystatechange=function(){("loaded"===a.readyState||"complete"===a.readyState)&&(a.onreadystatechange=null,t&&t())}:a.onload=function(){t&&t()},a.src=e,s.getElementsByTagName("head")[0].appendChild(a)}}},t.makeImgLog={getSingle:function(e){var t;return function(){return t||(t=e.apply(this,arguments))}},createImg:function(){var e=new Image;return e.onload=e.onerror=function(){e.onload=e.onerror=null,e=null},e},makeImgLog:function(a,n){var o,r=t.makeImgLog,i="",l={client:s("client"),clientfrom:s("clientfrom"),tpl:s("tpl")};n&&(l=e.extend(n));for(var u in l)l.hasOwnProperty(u)&&(i+="&"+u+"="+l[u]);o=r.getSingle(r.createImg)(),i=a+i,o.src="https://passport.baidu.com/img/v.gif?type="+i+"&v="+(new Date).getTime()}}}($,window.Pass);
!function(t,o){"use strict";function i(t){this.conf=t,this.width=t.width,this.height=t.height,this.mask=t.mask,this.titleText=t.titleText,this.content=t.content,this.close=t.close,this.onRender=t.onRender||function(){},this.num=Math.floor(1e3*Math.random()),this.init()}o.require;i.prototype.init=function(){this.mask&&this.createMask(),this.createBody()},i.prototype.createMask=function(){Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);this.maskDom=t('<div class="mod-dialog" id="pass-'+this.num+'"></div>'),t("body").append(this.maskDom)},i.prototype.show=function(){this.mask&&t(this.maskDom.get(0)).css("opacity","0.5").css("display","block");this.domBody.height();return this.domBody.show(),t("body").css("overflow","hidden"),t("html").css("overflow","hidden"),this},i.prototype.hide=function(){{var o=this;o.domBody.height()}return o.mask&&(o.maskDom.get(0).style.display="none"),o.domBody.hide(),t("body").css("overflow",""),t("html").css("overflow",""),this},i.prototype.remove=function(){return this.mask&&this.maskDom.remove(),this.domBody.remove(),t("body").css("overflow",""),t("html").css("overflow",""),this},i.prototype.createBody=function(){{var o,i;Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)}this.domBody=t('<div class="mod-dialog-body" id="pass-content'+this.num+'"><div class="mod-dialog-content"><div class="mod-dialog-main"></div></div></div>'),this.close&&this.domBody.append('<a class="mod-dialog-close" id="pass-dialog-close'+this.num+'"></a>'),t("body").append(this.domBody),this.domBody.css({width:this.width,marginLeft:-parseInt(this.width)/2+"%"}),o=this.domBody.children(".mod-dialog-content"),this.content&&(o.children(".mod-dialog-main").append(this.content),i=this.height||this.domBody.height(),this.domBody.css({marginTop:"-"+i/2+"px"}),this.show()),this.bind(),this.onRender(this)},i.prototype.setContent=function(t){this.domBody.append(t),this.show()},i.prototype.bind=function(){var o=this;t("#pass-dialog-close"+o.num).on("click",function(t){o.hide(),t.preventDefault()})},o.define("ui/dialog",i)}($,window.Pass);
!function(e,t){"use strict";var i,a,n,o,s,l=(t.require,{module:"auth_verify_type",error:{field:""}});l=e.extend(l,t.validator,t.ui),l=e.extend(l,{getElement:function(e){return document.getElementById(this.module+"-"+e)},render:function(){function i(t){switch("string"==typeof t?t=JSON.parse(t):t,t.state){case 1:e("#safeCenter").show(),e("#safeCenter").attr("data-up","yes"),Pass.logAll.logBfb&&(Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_showApp_1",ev:["auth_verifytype","show"]}),Pass.logAll.logBfb({en:"wpsecurity-"+ppAuthName+"-safeCenter_show"}));break;case 0:e("#safeCenter").show(),e("#safeCenter").attr("data-up","no"),Pass.logAll.logBfb&&(Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_showApp_0",ev:["auth_verifytype","show"]}),Pass.logAll.logBfb({en:"wpsecurity-"+ppAuthName+"-safeCenter_show"}));break;default:e("#safeCenter").hide(),e("#safeCenter").attr("data-up","default"),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_showApp_"+t.state,ev:["auth_verifytype","show"]})}}var a=this;if(window.client&&"native"===window.client&&navigator.userAgent.match(/Sapi_([\S\s]*)_Sapi/)&&t.client.compareStr(navigator.userAgent.match(/Sapi_([\S\s]*)_Sapi/)[1].split("_")[0],"8.4.4")){a.appCheck=!0;var n={action:"otp"};if("ios"===publicData.client)n.minver="3.1.0",t.client.deviceClass("sapi_action_sc_app_check",n,function(e,t){i(t,"ios")});else{n.minver="3.1.0";var o=JSON.parse(prompt('{action:{name:"sapi_action_sc_app_check",params:['+JSON.stringify(n)+"]}}"));i(o,"android")}}else a.appCheck=!1,e("#safeCenter").hide();a.judgeFlow(),a._setEvent(),Pass.logAll.logBfb&&"1"===showTheOther&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_moreWay_show"})},judgeFlow:function(){var e=getQueryString("safeProtect")||"",t=getQueryString("from")||"",i=getQueryString("u")||"",a=getQueryString("bindaction")||"",n=getQueryString("secstate")||"";s="on"===e&&"accountprotect"===t?"openProtect":"off"===e&&"accountprotect"===t?"closeProtect":i.indexOf("needauth")>-1?"setPassWord":i.indexOf("bindwidget")>-1&&i.indexOf("action=rebindmobile")>-1||a.indexOf("action=rebindmobile")>-1?"reBindMobile":i.indexOf("bindwidget")>-1&&i.indexOf("action=unbindmobile")>-1?"unBindMobile":i.indexOf("bindwidget")>-1&&i.indexOf("action=bindemail")>-1?"bindEmail":i.indexOf("bindwidget")>-1&&i.indexOf("action=unbindemail")>-1?"unBindEmail":i.indexOf("bindwidget")>-1&&i.indexOf("action=rebindemail")>-1?"reBindeMail":n?"loginControl":"auth"},_setEvent:function(){FastClick.attach(document.body);var s=this;e("#safeCenter").on("click",function(){function i(t){if(0!==t.errno)return s.validateError({msg:t.errmsg}),!1;var i={action:"check",type:"otp",vcode:t.code};i.clientfrom=publicData.clientfrom,i.client=publicData.client,i.tpl=publicData.tpl,i.adapter=publicData.adapter,i.subpro=publicData.subpro,i.token=getQueryString("token")||"",i.verifycenter=getQueryString("verifycenter")||"",i.traceid=getQueryString("traceid")||"",i.isnew=getQueryString("isnew")||"",i.skin=getQueryString("skin")||"",i.u=getQueryString("u")||"",e(s.getElement("loading")).css("display","block"),e.ajax({url:apiDomain+"/passport/authwidget?v="+(new Date).getTime(),data:i,type:"get",dataType:"jsonp",success:function(t){e(s.getElement("loading")).css("display","none"),0==t.errInfo.no?(Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_auth_success",ev:["auth_verifytype","show"]}),"linkAccount"===moduleFrom?document.location.replace(t.data.u+"&"+publicVar+"&moduleFrom="+moduleFrom):document.location=t.data.u+"&"+publicVar):(s.validateError({msg:t.errInfo.msg}),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_auth_error",ev:["auth_verifytype","show"]}))},error:function(){e(s.getElement("loading")).css("display","none"),s.validateError({msg:"网络连接失败，请检查您的网络设置并稍后再试。"})}})}if(!s.appCheck)return!1;var a=e("#safeCenter").attr("data-up");if("no"===a){if(window.client&&"native"===window.client){var n={action:"otp",minver:"3.1.0",uid:ppUserSecret||""};if("ios"===publicData.client)t.client.deviceClass("sapi_action_sc_app_invoke",n,function(e,t){i(t,"ios")},function(){s.validateError({msg:"调起app失败，请选择其他验证方式。"})});else{var o=JSON.parse(prompt('{action:{name:"sapi_action_sc_app_invoke",params:['+JSON.stringify(n)+"]}}"));i(o,"android")}}Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_clickApp_0",ev:["auth_verifytype","click"]})}else Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_clickApp_1",ev:["auth_verifytype","click"]}),document.location="https://wappass.baidu.com/wp/v3/ucenter/securecenter?from=app&adapter="+publicData.adapter;Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_clickApp",ev:["auth_verifytype","click"]})}),e("#faceLocation").on("click",function(){var e,t,i;if("sessionStorage"in window)try{e=sessionStorage.getItem("scanface"),t=sessionStorage.getItem("wapsec"),i=sessionStorage.getItem("enableExternalWeb")}catch(a){console.log(a)}window.studyGroup?Pass.logAll.logBfb({en:"wap-authtype-clickWithExp"}):window.controlGroup&&Pass.logAll.logBfb({en:"wap-authtype-clickWithoutExp"}),"native"!==publicData.clientfrom||"1"!==liveAbility&&("1"!==e||"center"!==t&&"1"!==i)?(Pass.logAll.logBfb({en:"wpsecurity-"+ppAuthName+"-face_lead_click"}),location.href=leadscanFace):(Pass.logAll.logBfb({en:"wpsecurity-"+ppAuthName+"-face_ok_click"}),s.openliving())}),e("#leadMobile").on("click",function(){if(i)i.show();else{var t='<div><div class="dialog-title-new"><span class="pass-layout-close" id="closeMobile"></span><span class="title-blue-line"></span><p class="dialog-title-new-p">如何开通手机号验证<p></div><div class="page-dialog-content"><p class="page-dialog-p">1&nbsp;在帐号管理页面，点击【绑定手机号】。</p><p class="page-dialog-p">2&nbsp;完成身份验证。</p><p class="page-dialog-p">3&nbsp;输入并验证手机号，开通成功</p></div></div>';i=new Pass.ui.dialog({width:"80%",mask:!0,content:t}),e("body").on("touchend","#closeMobile",function(e){e.preventDefault(),i.hide()})}}),e("#changeMobile").on("click",function(){if(n)n.show();else{var t='<div><div class="dialog-title-new"><span class="pass-layout-close" id="closeMobile"></span><span class="title-blue-line"></span><p class="dialog-title-new-p">如何更换手机号<p></div><div class="page-dialog-content"><p class="page-dialog-p">1&nbsp;打开帐号与安全页面，进入绑定手机页面</p><p class="page-dialog-p">2&nbsp;点击更换手机号，验证身份</p><p class="page-dialog-p">3&nbsp;完成验证，更换成功</p></div></div>';n=new Pass.ui.dialog({width:"80%",mask:!0,content:t}),e("body").on("touchend","#closeMobile",function(e){e.preventDefault(),n.hide()})}}),e("#bindEmail").on("click",function(){if(o)o.show();else{var t='<div><div class="dialog-title-new"><span class="pass-layout-close" id="closeFace"></span><span class="title-blue-line"></span><p class="dialog-title-new-p">如何开通绑定邮箱验证<p></div><div class="page-dialog-content"><p class="page-dialog-p">1&nbsp;打开帐号与安全页面，进入绑定手机</p><p class="mod-tipinfo-small">需先验证您的登录密码</p><p class="page-dialog-p">2&nbsp;绑定并验证邮箱</p><p class="mod-tipinfo-small">可用于解换绑、找回密码等操作</p><p class="page-dialog-p">3&nbsp;完成开通</p></div></div>';o=new Pass.ui.dialog({width:"80%",mask:!0,content:t}),e("body").on("touchend","#closeFace",function(e){e.preventDefault(),o.hide()})}}),e("#leadFace").on("click",function(){if(a)a.show();else{var t='<div><div class="dialog-title-new"><span class="pass-layout-close" id="closeFace"></span><span class="title-blue-line"></span><p class="dialog-title-new-p">如何开通刷脸验证<p></div><div class="page-dialog-content"><p class="page-dialog-p">1&nbsp;打开百度App</p><p class="mod-tipinfo-small">依次点击我的>设置>帐号管理>身份认证</p><p class="page-dialog-p">2&nbsp;进入身份认证页面</p><p class="mod-tipinfo-small">输入姓名、身份证完成认证</p><p class="page-dialog-p">3&nbsp;成功开通刷脸验证</p><p class="mod-tipinfo-small">可用于换绑手机、找回密码、帐号冻结等操作</p></div></div>';a=new Pass.ui.dialog({width:"80%",mask:!0,content:t}),e("body").on("touchend","#closeFace",function(e){e.preventDefault(),a.hide()})}}),e("body").on("click","#cardChange",function(t){t.preventDefault(),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_chooseBank",ev:["auth_verifytype","show"]}),e("#cardList").css("display","block"),sessionStorage&&1===+sessionStorage.getItem("verifyLength")&&ppBankcard?(e("#cardCloseButton").css("display","block"),e("#cardCloseButton").html('银行卡已不使用？<a href="'+sessionStorage.getItem("appealUrl")+'">点击此处解决</a>')):(e("#cardCloseButton").html("<span>换个登录方式</span>"),e("#cardCloseButton").find("span").off().on("click",function(){e("#cardList").hide()})),history.pushState({},"",location.href+"&banklist=1")}),e("body").on("click","#cardClose",function(t){t.preventDefault(),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_chooseBank_close",ev:["auth_verifytype","click"]}),e("#cardList").css("display","none"),history.back()}),window.onpopstate=function(){e("#cardList").css("display","none")},e("#footerOther").on("click",function(){e("#footerAppeal").show(),e(".verify-type-li:not(#safeCenter)").show(),e(this).hide(),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_footerOther_click",ev:["auth_verifytype","click"]})}),e("#moreWay").on("click",function(){var t=e(".unrecommend")||[];s.showAnimation(t,"show",!1),e(this).hide(),e("#cleanWay").show(),e("#footerAppeal").show(),Pass.logAll.logBfb&&(Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_moreWay_click"}),Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_cleanWay_show"}))}),e("#cardUl").on("click","li",function(){Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-"+ppAuthName+"-bankcard_click"})}),e("#cleanWay").on("click",function(){e("#footerAppeal").hide(),e("#moreWay").show(),e(this).hide();var t=e(".unrecommend")||[];s.showAnimation(t,"hide",!0),Pass.logAll.logBfb&&Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_cleanWay_click"})});try{sessionStorage.getItem("delta")||sessionStorage.setItem("delta",e.fn.getQueryString("delta"))}catch(l){}e("#cardCloseButton").find("span").on("click",function(){e("#cardList").hide()}),sessionStorage&&sessionStorage.getItem("verifyLength")>1&&e("#cardCloseButton").css("display","block")},showAnimation:function(t,i,a){if(Array.prototype.reverse&&a)var t=Array.prototype.slice.call(t).reverse();for(var n=0;n<t.length;n++)!function(a){setTimeout(function(){"show"===i?e(t[a]).fadeIn():e(t[a]).fadeOut(100)},100*a)}(n)},identification:function(){var e=this;if(window.client&&"native"===window.client){var i="",a={type:1,hideGuidePage:0},n={};n.tpl=publicData.tpl||"empty",n.scene=s||"auth";var o="{tpl:"+n.tpl+",scene:"+n.scene+"}",l="pp-pp-"+(publicData.subpro||"empty")+"-"+o;if("ios"===publicData.client)i="1"===islogin?"sapi_biometrics_identification":"sapi_biometrics_identification_with_authtoken",a.subpro=l,"1"!==islogin&&(a.authtoken=encodeURIComponent(authtoken)),t.client.deviceClass(i,a,function(t,i){e.upliving(i.credentialKey)},function(t,i){-204!==i.errno&&-305!==+i.errno&&-307!==+i.errno&&e.validateError({msg:i.errmsg})});else{var c={hideGuidePage:0};if("1"!==islogin)var a=JSON.parse(prompt('{action: {name: "sapi_biometrics_identification_with_authtoken", params: ["1","'+authtoken+'","0","'+l+'",'+JSON.stringify(c)+"]}}"));else var a=JSON.parse(prompt('{action:{name:"sapi_biometrics_identification",params:["1","0","'+l+'",'+JSON.stringify(c)+"]}}"));0==a.errno?e.upliving(a.credentialKey):-204!==a.errno&&-305!==+a.errno&&-307!==+a.errno&&(-302===a.errno&&(a.errmsg="抱歉，人脸对比失败，请确保是本人操作"),e.validateError({msg:a.errmsg||"系统错误"}))}}},openliving:function(){var e=this;"cert"===ppFaceMatchType?(e.identification(),Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_certface"})):"uncert"===ppFaceMatchType?(e.identificationData(),Pass.logAll.logBfb({en:"wpsecurity-auth_verifytype_uncertface"})):location.href=leadscanFace},identificationData:function(){var e=this,i={};i.tpl=publicData.tpl||"empty",i.scene=s||"auth";var a="{tpl:"+i.tpl+",scene:"+i.scene+"}",n="pp-pp-"+(publicData.subpro||"empty")+"-"+a;t.client.ischeckNativeMethod("sapi_biometrics_identification_with_uid",function(){var i="ios"===publicData.client?encodeURIComponent(livinguname):livinguname,a={type:2,subpro:n,hideGuidePage:0,uid:i},o=function(t){e.upliving(t)},s=function(i,a){-204!==i&&-305!==i&&-307!==i&&e.validateError(-301===i||-302===i||-306===i?{msg:"开启刷脸登录失败，请确保本人操作并重新尝试"}:-303===i?{msg:"刷脸功能获取失败，请重新尝试"}:{msg:a}),t.logAll.logBfb({en:"wpsecurity-auth-verify-type_submitError_request"})};if("ios"===publicData.client)t.client.deviceClass("sapi_biometrics_identification_with_uid",a,function(e,t){o&&o(t.callbackkey)},function(e,t){var i=parseInt(t.errno,10);s&&s(i,t.errmsg)});else{var l=JSON.parse(prompt('{action: {name: "sapi_biometrics_identification_with_uid", params: ['+JSON.stringify(a)+"]}}")),c=parseInt(l.errno,10);0===c?o&&o(l.callbackkey):s&&s(c,l.errmsg)}},function(){location.href=leadscanFace})},validateError:function(t){var i=this,a=e("#error");e("#error").html(t.msg).css("display","block"),i.clearDialogMsg(a)},upliving:function(i){var a=this;t.logAll.logBfb({en:"wpsecurity-auth-verifytype_faceSubmit"}),e(a.getElement("loading")).css("display","block");{var n=e(a.getElement("formWrapper")).formJson();(new Date).getTime()}n.clientfrom=publicData.clientfrom,n.client=publicData.client,n.callback_key=i,n.tpl=publicData.tpl,n.type="facematch","secondcard"===e.fn.getQueryString("verifytype")&&(n.scscene=e.fn.getQueryString("scscene"),n.scnewuser=e.fn.getQueryString("scnewuser")),e.ajax({url:"secondcard"!==e.fn.getQueryString("verifytype")?apiDomain+"/passport/authwidget":apiDomain+"/wp/v3/security/authsecondcardverify",type:"POST",data:n,dataType:"json",success:function(i){e(a.getElement("loading")).hide(),"0"===i.errInfo.no?i.data.loginProxy?e.get(i.data.loginProxy,function(t){e(a.getElement("loading")).css("display","none");var n="https://"+location.hostname+"/wp/v3/security/secondcardmodifyaccinfo?clientfrom="+window.client+"&client="+publicData.client+"&tpl="+publicData.tpl+"&bdstoken="+i.data.bdstoken+"&authsid="+i.data.authsid+"&loginType="+e.fn.getQueryString("loginType")+"&u="+encodeURIComponent(t.data.u);0===+t.errInfo.no?(Pass.logAll.logBfb({en:"wap_login_success"}),document.location.replace(i.data.hasUsername?n:"/passport/fillname?tpl="+publicData.tpl+"&client="+publicData.client+"&clientfrom="+window.client+"&adapter="+publicData.adapter+"&secondCard=1&u="+encodeURIComponent(n))):a._validateError({msg:t.errInfo.msg})},"json"):n.callback_key?document.location.replace(i.data.u):a.openliving():a.validateError({msg:i.errInfo.msg}),clearTimeout(a.submitTimer),t.logAll.logBfb({en:"wpsecurity-auth-verifytype_request_success"})}}),a.submitTimer=setTimeout(function(){e(a.getElement("loading")).hide(),a.validateError({msg:a.lang.networkNoText})},15e3)}}),l.render(),t.define("auth_verify_type",l)}($,window.Pass);

