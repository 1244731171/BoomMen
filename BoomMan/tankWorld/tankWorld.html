<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript" src='../common/KIT.js'></script>
    <script type="text/javascript" src='../common/CHECKCROSS.js'></script>
    <script type="text/javascript" src='../common/TIME.js'></script>
    <script type="text/javascript" src='../common/WORLD.js'></script>
    <script type="text/javascript" src='./CHOICE.js'></script>
    <script type="text/javascript" src='./TANK.js'></script>
</head>

<body>
    <script type="text/javascript">

        // create house
        class house {
            constructor(x, y, width, height) {
                this._uid = new Date().getTime();
                this._world = null;
                this._brush = null;

                width--;
                height--;

                this._points = [{
                    'x': x,
                    'y': y
                }, {
                    'x': x + width,
                    'y': y
                }, {
                    'x': x + width,
                    'y': y + height
                }, {
                    'x': x,
                    'y': y + height
                }];
            }

            load(world) {
                let self = this;
                this._world = world;
                this._brush = world.earth.getContext("2d");
                TIME.on('draw' + self._uid, self.draw.bind(self));
            }

            draw() {
                let p = this._points;
                this._brush.lineWidth = 0.5;
                this._brush.fillStyle = "#81D8D0";
                this._brush.strokeStyle = "#81D8D0";
                this._brush.beginPath();
                this._brush.moveTo(p[0].x, p[0].y);
                this._brush.lineTo(p[1].x, p[1].y);
                this._brush.lineTo(p[2].x, p[2].y);
                this._brush.lineTo(p[3].x, p[3].y);
                this._brush.closePath();
                this._brush.fill();
            }
        }

        const HOUSE_WIDTH = 25;
        const HOUSE_HEIGHT = 25;
        const HEIGHT = HOUSE_HEIGHT * 9;
        const WIDTH = HOUSE_WIDTH * 9;
        let WORLD = new __WORLD(WIDTH, HEIGHT);

        for (let i = 1; i < 9; i = i + 2) {
            for (let j = 1; j < 9; j = j + 2) {
                WORLD.add(new house(i * HOUSE_WIDTH, j * HOUSE_WIDTH, HOUSE_WIDTH, HOUSE_HEIGHT));
            }
        }


    </script>
</body>

</html>